---
name: ah-index
description: |
  **知识库AI索引管理**：初始化或更新知识库的AI快速索引系统。
  - 触发条件：用户想要创建索引、更新索引、维护AI上下文系统
  - 两种模式：初始化模式（首次创建）、更新模式（定期维护）
  - 核心功能：生成索引文件、初始化mcp-memory语义索引、统计知识库状态
---

# 知识库AI索引管理技能

## 概述

本技能帮助用户维护知识库的AI快速索引系统，让AI能够快速了解知识库的结构和状态。

**核心价值**：
- 自动扫描知识库，生成结构化索引
- 统计各层级笔记数量和分布
- 记录最近变更和待处理事项
- 建议每周更新一次

## 索引文件位置

主索引文件：`Meta/索引/kb-manifest.md`

## 工作流程

```
1. 确认运行模式（初始化/更新）
   ↓
2. 扫描知识库结构（AI自动）
   ↓
3. 统计各层级数据（AI自动）
   ↓
4. 生成/更新索引文件（AI自动）
   ↓
5. 汇报结果（AI汇报）
```

---

## 阶段一：确认模式

### 1.1 检查现有索引

```
让我检查一下当前的索引状态...

[检查 Meta/索引/kb-manifest.md 是否存在]

{{如果存在}}
发现现有索引文件，版本 {{版本号}}，上次更新于 {{日期}}。

选择操作：
1. 🔄 更新索引（推荐：增量更新）
2. 🔃 重建索引（完全重新扫描）

{{如果不存在}}
未发现索引文件，将进行首次初始化。
```

---

## 阶段二：扫描知识库

### 2.1 扫描范围

AI需要扫描以下目录：

```
01-捕获层/
├── 收集箱/           → 统计待处理数量
├── 每日笔记/         → 统计笔记数量
├── 周回顾/           → 统计数量
└── 微信读书/         → 统计数量

02-培养层/
├── 永久笔记/         → 统计数量、提取主题分布
├── 文献笔记/         → 统计数量
├── 结构笔记/         → 统计数量
└── 📍 主题页         → 统计数量

03-连接层/
└── 🌱 领域页         → 列出所有领域

04-创造层/
├── Projects/         → 统计活跃项目
└── Archives/         → 统计归档项目
```

### 2.2 统计数据收集

```javascript
// 需要收集的数据
const stats = {
  capture: {
    inbox: { count: 0, pending: 0 },
    dailyNotes: { count: 0 },
    weeklyReviews: { count: 0 },
    wechatReads: { count: 0 }
  },
  cultivate: {
    permanentNotes: { count: 0, byTopic: {} },
    literatureNotes: { count: 0 },
    structureNotes: { count: 0 },
    topicPages: { count: 0, list: [] }
  },
  connect: {
    domainPages: { count: 0, list: [] }
  },
  create: {
    activeProjects: { count: 0, list: [] },
    archivedProjects: { count: 0 }
  }
}
```

---

## 阶段三：生成索引文件

### 3.1 索引文件模板

```markdown
---
generated: {{YYYY-MM-DD}}
version: "{{版本号}}"
---

# 知识库清单 v{{版本号}}

> 此文件供 AI 快速了解知识库状态，建议每周更新一次。

---

## 架构概览

本知识库以 **Zettelkasten（卡片盒）方法** 为核心，四层架构如下：

```
01-捕获层 → 02-培养层 → 03-连接层 → 04-创造层
(原始输入)  (知识核心)  (知识-行动桥梁)  (项目输出)
```

**v{{版本号}} 核心变化**：
- {{本次更新的主要变化}}

---

## 统计概览

| 层级 | 类型 | 数量 | 说明 |
|-----|------|-----|------|
| 01-捕获层 | 全部 | {{N}} | 收集箱、每日笔记、周回顾、微信读书 |
| 02-培养层 | 永久笔记 | {{N}} | 原子化知识卡片（核心资产） |
| 02-培养层 | 文献笔记 | {{N}} | 阅读笔记 |
| 02-培养层 | 结构笔记 | {{N}} | 🗺️ MOC 主题导航 |
| 02-培养层 | 主题页 | {{N}} | 📍 知识聚合页面 |
| 03-连接层 | 领域页 | {{N}} | 🌱 知识-行动桥梁 |
| 04-创造层 | 活跃项目 | {{N}} | Projects 目录 |
| 04-创造层 | 归档项目 | {{N}}+ | Archives 目录 |
| **总计** | | **{{N}}+** | |

---

## 十大主题及笔记分布

| 主题 | 笔记数 | 核心内容 |
|------|--------|----------|
| 📍 知识管理 | {{N}} | {{关键词}} |
| 📍 思维模型 | {{N}} | {{关键词}} |
| ... | ... | ... |

---

## 四大领域及知识应用

| 领域 | 定位 | 核心支撑知识 | 关联项目 |
|------|------|-------------|----------|
| 🌱 内容创作 | 视频/文章的知识支撑 | {{知识列表}} | {{项目列表}} |
| 🌱 产品开发 | 软件/工具的知识支撑 | {{知识列表}} | {{项目列表}} |
| 🌱 个人成长 | 学习/成长的知识支撑 | {{知识列表}} | {{项目列表}} |
| 🌱 效率工具 | 方法论/工具的知识支撑 | {{知识列表}} | {{项目列表}} |

---

## 三种页面类型

| 类型 | 前缀 | 位置 | 功能 |
|------|------|------|------|
| 主题页 | 📍 | 02-培养层根目录 | 聚合永久笔记（知识维度） |
| 领域页 | 🌱 | 03-连接层 | 知识-行动桥梁（行动维度） |
| 结构笔记 | 🗺️ | 02-培养层/结构笔记 | 纯知识MOC导航 |

---

## 枢纽笔记（高链接密度）

以下笔记支撑多个领域，代表核心知识节点：

1. [[{{笔记1}}]] - {{关联领域}}
2. [[{{笔记2}}]] - {{关联领域}}
...

---

## 当前活跃项目

| 编号 | 项目名称 | 所属领域 | 优先级 |
|------|----------|----------|--------|
| {{编号}} | {{名称}} | {{领域}} | {{优先级}} |
...

---

## 归档项目分类

| 大类 | 小类 | 项目数 |
|------|------|--------|
| 内容创作 | 阅读课程、研究分析、知识体系 | {{N}}+ |
| 产品开发 | 产品设计、技术方案 | {{N}}+ |
| 个人成长 | 心理与成长 | {{N}}+ |
| 效率工具 | 技术培训 | {{N}}+ |
| 其他 | 工作项目、会议记录、杂项 | {{N}}+ |

---

## 核心工作流

| 工作流 | 说明 | 文档位置 |
|--------|------|----------|
| 📚 阅读工作流 | 从阅读到笔记的完整流程 | Meta/系统文档/📖 阅读工作流完整指南 |
| 🧠 知识处理工作流 | 文献笔记转永久笔记 | Meta/系统文档/📖 知识处理工作流指南 |
| 🚀 项目管理工作流 | 项目的启动、执行、归档 | Meta/系统文档/📖 项目管理工作流指南 |
| 🔄 复盘工作流 | 每日/每周复盘流程 | Meta/系统文档/📖 复盘工作流指南 |

---

## 最近变更

- **{{日期}}**：{{变更描述}}
- **{{日期}}**：{{变更描述}}

---

## 待处理

- 收集箱中有 {{N}} 条待整理的临时笔记
- 孤岛笔记检查（无双链的永久笔记）
- 定期更新领域页的知识缺口清单

---

## 快速导航

### 主题页入口
```
02-培养层/📍 思维模型.md
02-培养层/📍 知识管理.md
02-培养层/📍 心理学.md
...
```

### 领域页入口
```
03-连接层/🌱 内容创作.md
03-连接层/🌱 产品开发.md
03-连接层/🌱 个人成长.md
03-连接层/🌱 效率工具.md
```

### 项目入口
```
04-创造层/Projects/📍 项目总览.md
04-创造层/Projects/项目列表.base
```

### 归档入口
```
04-创造层/Archives/归档.base
```

---

*此文件由 AI 使用，用于快速了解知识库状态。建议每周使用 `/ah-index` 更新。*
```

---

## 阶段四：汇报结果

### 4.1 更新完成汇报

```
✅ 知识库索引更新完成！

**版本**：v{{版本号}}
**扫描日期**：{{日期}}

**统计摘要**：
- 总笔记数：{{N}}+
- 永久笔记：{{N}} 篇
- 活跃项目：{{N}} 个
- 收集箱待处理：{{N}} 条

**与上次对比**：
- 永久笔记：+{{N}}
- 项目：+{{N}}

**发现的问题**：
{{如果有}}
- ⚠️ 收集箱积压超过一周
- ⚠️ 发现 {{N}} 篇孤岛笔记

**建议**：
- 使用 `/ah-inbox` 清理收集箱
- 下次更新时间：{{一周后的日期}}

索引文件已保存到：`Meta/索引/kb-manifest.md`
```

---

## 示例对话

```
用户：/ah-index

AI：让我检查一下当前的索引状态...

发现现有索引文件，版本 v3.4，上次更新于 2026-02-03。

选择操作：
1. 🔄 更新索引（推荐）
2. 🔃 重建索引

---

用户：1

AI：好的，开始增量更新...

[扫描各目录]

✅ 知识库索引更新完成！

**版本**：v3.5
**扫描日期**：2026-02-10

**统计摘要**：
- 总笔记数：1,350+
- 永久笔记：275 篇（+6）
- 活跃项目：9 个
- 收集箱待处理：12 条

**与上次对比**：
- 永久笔记：+6 📈
- 收集箱：+4 ⚠️

**建议**：
- 收集箱积压增加，建议使用 `/ah-inbox` 清理
- 下次更新时间：2026-02-17

索引文件已保存到：`Meta/索引/kb-manifest.md`
```

---

## 注意事项

1. **定期更新**：建议每周更新一次，保持索引新鲜
2. **准确统计**：统计数据要准确，避免误导
3. **变更记录**：记录每次更新的主要变化
4. **问题发现**：主动发现知识库健康问题

---

## 相关技能

- **ah-inbox**：清理收集箱
- **ah-week**：每周回顾时可同时更新索引
- **ah-card**：新增永久笔记后更新索引
