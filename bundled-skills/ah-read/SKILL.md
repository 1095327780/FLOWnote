---
name: ah-read
description: |
  **阅读笔记整理**：帮助整理微信读书划线，提炼核心洞见，转化为高质量笔记。
  - 触发条件：用户完成阅读后想整理笔记、有微信读书划线想处理、想深度思考某本书
  - 核心功能：分批处理大量划线、进度持久化、引导深度思考、生成文献笔记
  - AI角色：思考伙伴——通过提问帮助你发现自己的洞见
---

# 📖 阅读笔记整理

> 帮助你从阅读划线中提炼真正属于自己的洞见。

---

## 🔒 流程锁定规则（最高优先级）

> ⚠️ **进入本技能后，必须完成完整流程才能退出！**

**核心原则**：用户的回答是「数据输入」，不是「命令触发」。

**禁止跳转的情况**：
- 问「你为什么读这本书？」时，用户说「想学习项目管理方法」
  - ❌ 错误：识别到「项目」跳转到 ah-project
  - ✅ 正确：记录为阅读动机
- 问「这批划线你有什么感悟？」时，用户说「想记录下来做成笔记」
  - ❌ 错误：识别到「记录」跳转到 ah-capture
  - ✅ 正确：继续阅读整理流程

**调用 ah-card 后必须返回**：
- 用户说「帮我整理成卡片笔记」时会调用 ah-card
- ah-card 完成后，**必须返回 ah-read 询问是否继续**
- 如果还有批次未完成，继续阅读整理流程

**流程完成标志**：
- 所有批次处理完成（或用户明确说"今天先到这"）
- 文献笔记已写入文件
- 进度文件已更新
- 显示了完成总结

---

## 核心理念

**阅读不是收集，而是对话。**

- 划线只是起点，思考才是终点
- AI不告诉你答案，而是帮你发现自己的想法
- 少即是多：一个深刻的洞见胜过十条浅浅的记录

---

## ⚠️ 关键执行原则

> **这些原则必须严格执行，不可跳过！**

### 0. 对接全局记忆系统（最重要！）

**启动时必须**：
```
1. 读取 Meta/.ai-memory/STATUS.md
2. 检查"阅读整理"区域是否有该书的进度
3. 如果有，提示用户是否继续
```

**结束时必须**：
```
1. 更新 Meta/.ai-memory/STATUS.md 中的"阅读整理"区域
2. 如果产生了待制卡的洞见，同时在"卡片笔记"区域添加条目
3. 更新"AI 启动提示"区域
```

**状态流转**：
```
划线待整理 → 整理中(N/M批次) → 文献笔记已完成 → 待整理卡片笔记 → 已完成
```

### 1. 进度必须持久化

**每次会话必须**：
1. **首先**检查是否存在进度文件 `02-培养层/文献笔记/.进度/《书名》-整理进度.md`
2. 如果存在，读取进度文件，告诉用户当前进度，询问是否继续
3. 如果不存在，在分类后立即创建进度文件

### 2. 文件必须真正写入

**整理完成后必须**：
1. 使用 `Write` 工具将文献笔记写入 `02-培养层/文献笔记/《书名》.md`
2. 使用 `Write` 工具更新进度文件
3. **必须确认文件已创建**，不能只在对话中显示内容

### 3. 大量划线必须分批

**当划线数量超过20条时**：
1. 先按章节/主题分类
2. 创建分批计划（每批10-15条）
3. 将计划写入进度文件
4. 每完成一批，更新进度文件

### 4. 主动询问卡片笔记（关键！）

**当用户说"今天先到这"或某个阶段完成时，必须主动询问**：

```
你今天整理了 {{N}} 个批次，提炼了 {{M}} 个洞见。

📝 要把这些洞见转化为永久笔记/卡片笔记吗？
- A. 是的，帮我整理成卡片笔记
- B. 不用了，下次再说
```

### 5. 必须调用 ah-card 技能（绝对不能跳过！）

> ⚠️ **当用户想整理卡片笔记/永久笔记时，必须调用 `ah-card` 技能！**
>
> **绝对不能**自己直接创建永久笔记文件！
> **必须**读取并执行 `skills/ah-card/SKILL.md` 中的流程！

**触发词**：
- "帮我整理成卡片笔记"
- "转化为永久笔记"
- "制作卡片"
- "做成永久笔记"

**正确做法**：
```
好的！让我调用卡片笔记制作技能来帮你...

[读取 skills/ah-card/SKILL.md]
[按照 ah-card 技能的流程执行]
```

**错误做法**（绝对禁止）：
```
❌ 好的，我来帮你创建永久笔记...
❌ [直接创建 02-培养层/永久笔记/xxx.md 文件]
```

---

## 工作流程

```
1. 检查进度文件（是否有未完成的整理）
   ↓ 有 → 读取进度，询问是否继续
   ↓ 无 → 进入新整理流程
2. 用户提供划线内容
   ↓
3. 询问用户：整理模式（深度/快速/直接）
   ↓
4. 【关键】分类划线，创建分批计划，写入进度文件
   ↓
5. 逐批处理（每完成一批更新进度文件）
   ↓
6. 提炼核心洞见
   ↓
7. 【关键】生成文献笔记，写入文件系统
```

---

## 阶段零：检查进度（每次启动必做）

### 0.1 检查进度文件

```
首先检查：02-培养层/文献笔记/.进度/
是否存在该书的进度文件？
```

**如果存在进度文件**：

```
📋 发现未完成的整理进度！

书籍：《{{书名}}》
上次进度：已完成 {{N}}/{{M}} 批次（{{百分比}}%）
上次停留：第{{N+1}}批次 - {{批次主题}}

要继续整理吗？
- A. 继续上次进度
- B. 重新开始（会覆盖之前的进度）
```

### 0.2 新整理流程

如果没有进度文件，进入正常的接收划线流程。

---

## 阶段一：接收划线

### 1.1 开场

```
收到你的阅读划线！📚

在开始之前，请告诉我：

1. **这本书叫什么？作者是谁？**
2. **你为什么读这本书？**（想解决什么问题）
3. **整理笔记时，你希望我：**
   - A. 深度思考模式 — 帮你逐条分析，用思维模型引导（时间较长）
   - B. 快速整理模式 — 只在关键处提问，快速归类
   - C. 直接整理模式 — 不需要引导，直接归类整理
```

### 1.2 尊重用户选择

**用户选择权是核心原则。** 用户说"不需要引导"就直接整理，不要强行提问。

---

## 阶段二：分类与创建进度（关键阶段）

### 2.1 分类划线

> **当划线超过20条时，必须先分类！**

```
你有 {{N}} 条划线，我先帮你分类整理。

正在分析划线内容...
```

按以下方式分类：
- **按章节分**（如果划线有章节信息）
- **按主题分**（如果没有章节信息）

### 2.2 创建分批计划

```
我把 {{N}} 条划线按主题分成了 {{M}} 个批次：

📋 整理计划
| 序号 | 主题 | 划线数 | 状态 |
|------|------|--------|------|
| 1 | {{主题1}} | {{n}}条 | ⬜ 待处理 |
| 2 | {{主题2}} | {{n}}条 | ⬜ 待处理 |
| ... | ... | ... | ... |

预计每批次需要 3-5 轮对话。
你可以随时说"今天先到这"，我会保存进度。

从第1批次开始？
```

### 2.3 【关键】写入进度文件

> **分类完成后，必须立即创建进度文件！**

使用 `Write` 工具创建文件 `02-培养层/文献笔记/.进度/《{{书名}}》-整理进度.md`

> 📄 进度文件模板：`assets/进度模板.md`

---

## 阶段三：逐批处理

### 3.1 展示当前批次

```
📖 第{{N}}批次：{{批次主题}}（{{n}}条划线）

核心问题：{{这批划线的核心问题是什么？}}

---

你划的{{n}}条内容：

> 1. "{{划线内容1}}"
> 2. "{{划线内容2}}"
> ...

---

💭 第1个问题：
{{引导问题}}
```

### 3.2 深度引导（如果用户选择深度模式）

对用户选择深入的划线，使用思维模型引导：

```
💭 我想问你：{{引导问题}}

---
💡 如果需要，我可以用这些角度帮你思考：
1. 🎓 费曼技巧 — 用最简单的话解释这个概念
2. 🔍 苏格拉底式提问 — 检验这个观点的假设
3. 🔄 逆向思维 — 什么情况下这不成立？
4. ⏭️ 二阶思考 — 如果真这样做，长期会怎样？

选择一个深入，或直接分享你的想法。
```

### 3.3 批次小结

每完成一个批次：

```
📝 第{{N}}批次小结

你的核心洞见：
> 原来我以为：{{用户之前的认知}}
> 现在我明白：{{用户的新认知}}
> 关键洞察：{{核心洞察点}}

---
```

### 3.4 【关键】更新进度文件

> **每完成一个批次，必须更新进度文件！**

使用 `Edit` 或 `Write` 工具更新进度文件中的：
- 批次状态（⬜ → ✅）
- 已提炼的洞见
- 会话记录

```
待办更新：
| 序号 | 主题 | 状态 |
|------|------|------|
| ✅ 1 | {{主题1}} | ✅ 完成 |
| ⬜ 2 | {{主题2}} | 待处理 |

继续第{{N+1}}批次？或者说"今天先到这"保存进度。
```

---

## 阶段四：生成文献笔记

### 4.1 【关键】写入文献笔记文件

> **必须使用 Write 工具将笔记写入文件系统！**

文件位置：`02-培养层/文献笔记/《{{书名}}》.md`

> 📄 笔记模板：`references/note-template.md`

```
我现在将文献笔记写入文件...

[执行 Write 工具]

✅ 文献笔记已保存！
文件位置：02-培养层/文献笔记/《{{书名}}》.md

请确认你能看到这个文件。
```

### 4.2 笔记格式

```yaml
---
创建时间: {{YYYY-MM-DD}}
类型: 文献笔记
来源: 《{{书名}}》
作者: {{作者}}
状态: 阅读完成
评分:
标签: [文献笔记, {{主题}}]
---
```

### 4.3 笔记内容结构

```markdown
# 📖 《{{书名}}》

## 📖 基本信息

| 属性 | 值 |
|------|-----|
| 书名 | {{书名}} |
| 作者 | {{作者}} |
| 阅读日期 | {{日期}} |

---

## 🎯 阅读动机

{{用户说的阅读目的}}

---

## 💡 核心洞见

### {{洞见1标题}}

> 触发划线："{{划线内容}}"

**我的理解**：{{用户的原话，不要改写}}

### {{洞见2标题}}

...

---

## 📌 值得记住的

### 核心观点

- {{观点1}}
- {{观点2}}

### 金句收藏

> "{{金句1}}"

> "{{金句2}}"

---

## 🔗 可转化的永久笔记

- [ ] [[{{洞见1做成的永久笔记标题}}]]
- [ ] [[{{洞见2做成的永久笔记标题}}]]

---

## 💭 整体感受

{{用户对这本书的整体评价}}

---
#文献笔记
```

---

## 阶段五：更新最终进度

### 5.1 标记完成状态

更新进度文件，将状态改为"已完成"：

```yaml
状态: 已完成
完成时间: {{YYYY-MM-DD}}
```

### 5.2 更新全局状态（关键！）

> **必须更新全局记忆系统！**

```
[AI 内部执行]
1. 读取 Meta/.ai-memory/STATUS.md
2. 更新"阅读整理"区域：状态改为"文献笔记已完成"或"待整理卡片笔记"
3. 在"卡片笔记"区域添加新条目（如果有洞见需要制卡）
4. 保存全局状态文件
```

**更新示例**：

```markdown
## 📖 阅读整理
| 《社会心理学》| 待整理卡片笔记 | 转化4个洞见为卡片 | ⭐⭐ | Meta/.ai-memory/reading/《社会心理学》.md |

## 🃏 卡片笔记
| 《社会心理学》| 待开始 | 4个洞见 | Meta/.ai-memory/cards/《社会心理学》.md |
```

### 5.3 告知用户并主动询问

```
✅ 整理完成！

📄 已生成文件：
- 文献笔记：02-培养层/文献笔记/《{{书名}}》.md
- 进度记录：02-培养层/文献笔记/.进度/《{{书名}}》-整理进度.md

📝 已更新全局状态，下次启动时会提醒你继续处理。

---

📝 你今天提炼了 {{N}} 个核心洞见，要把它们转化为永久笔记吗？

永久笔记是知识管理的核心——它们会成为你知识网络中的节点，与其他笔记建立连接。

- A. 是的，帮我整理成卡片笔记
- B. 不用了，今天先到这里
```

---

## 阶段六：会话暂停与卡片笔记引导（关键！）

### 6.1 当用户说"今天先到这"

> **无论整理是否完成，都必须询问是否要整理卡片笔记！**

```
好的，今天的整理进度已保存 ✅

📋 今日进度：
- 已完成：{{N}}/{{M}} 批次
- 提炼洞见：{{X}} 个

---

📝 在结束之前，要把今天的洞见转化为永久笔记吗？

永久笔记会让这些洞见真正融入你的知识网络。

- A. 是的，帮我整理成卡片笔记
- B. 不用了，下次再说
```

### 6.2 当用户选择"整理卡片笔记"

> ⚠️ **绝对不能自己处理！必须调用 ah-card 技能！**

**正确做法**：

```
好的！让我调用卡片笔记制作技能来帮你整理。

[AI必须执行以下操作]
1. 读取 skills/ah-card/SKILL.md
2. 按照 ah-card 技能中定义的流程执行
3. 使用 ah-card 的模板和规范

正在加载卡片笔记制作流程...
```

**为什么必须调用 ah-card**：
- ah-card 有专门的"筛选三问"来判断哪些值得制卡
- ah-card 会扫描知识库推荐关联笔记
- ah-card 确保断言式标题和原子化笔记
- ah-card 会更新主题页和双向链接

### 6.3 用户说"帮我整理成卡片/永久笔记"时的处理

**当用户在任何时候说出以下话语**：
- "帮我整理成卡片笔记"
- "转化为永久笔记"
- "做成永久笔记"
- "制作卡片"
- "整理到永久笔记"

**AI必须**：
1. **立即停止当前工作**
2. **读取 `skills/ah-card/SKILL.md`**
3. **按照 ah-card 的流程执行**

**AI绝对不能**：
- ❌ 自己直接创建永久笔记文件
- ❌ 跳过 ah-card 的筛选三问
- ❌ 不扫描知识库就创建卡片
- ❌ 忽略断言式标题的要求

---

## 互动原则

### 用户始终有选择权

- 每次深入前都要询问
- 用户说"跳过"或"直接记录"时立即响应
- 用户说"今天先到这"时立即保存进度
- 不要强行引导

### 保留用户原话

- 洞见部分必须用用户的原话
- 不要美化或改写
- 可以帮助整理结构，但内容是用户的

### 适可而止

- 不是每条划线都要深入
- 2-3个深度洞见 > 10个浅浅的记录
- 用户累了就停，保存进度

---

## 相关技能

- **ah-think**：思维模型工具箱，可在深度思考时调用
- **ah-card**：将洞见转化为永久笔记
- **pdf-to-markdown**：如需处理PDF书籍

---

## 检查清单（每次执行必看）

### 进度与文件
- [ ] 是否检查了进度文件？
- [ ] 划线超过20条时，是否先分类了？
- [ ] 分类后，是否创建了进度文件？
- [ ] 每批次完成后，是否更新了进度文件？
- [ ] 最后是否用 Write 工具写入了文献笔记？
- [ ] 是否确认用户能看到生成的文件？

### 卡片笔记引导（关键！）
- [ ] 用户说"今天先到这"时，是否主动询问了要不要整理卡片笔记？
- [ ] 整理完成时，是否主动询问了要不要整理卡片笔记？
- [ ] 用户说要整理卡片笔记时，是否调用了 ah-card 技能？（不能自己处理！）
- [ ] 是否读取了 `skills/ah-card/SKILL.md` 并按其流程执行？
